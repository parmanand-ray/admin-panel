

<div class="container mt-4">
  <h3 class="mb-4 text-center">Add New Product</h3>

  <form action="/products/add" method="POST" enctype="multipart/form-data">
    <div class="card p-4 shadow-sm">

         <!-- CATEGORY MULTI SELECT -->
            <div class="mb-3">
  <label class="form-label fw-bold fs-5">Select Categories *</label>

  <div class="category-checkbox-group">
    <% 
      // Create a map of parent categories and their subcategories
      const parentCategories = categories.filter(c => !c.parentId);
      const subCategories = categories.filter(c => c.parentId);
    %>

    <% parentCategories.forEach(parent => { %>
      <div class="mb-3 border-bottom pb-2">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" name="product_cat" value="<%= parent._id %>" id="cat_<%= parent._id %>">
          <label class="form-check-label fw-semibold text-primary" for="cat_<%= parent._id %>">
            <%= parent.catName %>
          </label>
        </div>

        <div class="ms-4 mt-2">
          <% subCategories
            .filter(sub => String(sub.parentId) === String(parent._id))
            .forEach(sub => { %>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" name="product_cat" value="<%= sub._id %>" id="cat_<%= sub._id %>">
                <label class="form-check-label" for="cat_<%= sub._id %>">
                  <%= sub.catName %>
                </label>
              </div>
          <% }) %>
        </div>
      </div>
    <% }) %>
  </div>
</div>

      <!-- PRODUCT INFO -->
      <div class="section-title mb-3"><strong>Basic Info</strong></div>

      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label">Product Title *</label>
          <input type="text" class="form-control" name="product_title" required>
        </div>

        <div class="col-md-6 mb-3">
          <label class="form-label">Product Code</label>
          <input type="text" class="form-control" name="product_code">
        </div>
      </div>

      <div class="mb-3">
        <label class="form-label">Product Description</label>
        <textarea class="form-control" name="product_desc" rows="3"></textarea>
      </div>

      <div class="mb-3">
        <label class="form-label">Product Specification</label>
        <textarea class="form-control" name="product_specfi" rows="4"></textarea>
      </div>
   


      <!-- PRICE -->
      <!-- <div class="row">
        <div class="col-md-4 mb-3">
          <label class="form-label">Price</label>
          <input type="number" step="0.01" class="form-control" name="product_price">
        </div>

        <div class="col-md-4 mb-3">
          <label class="form-label">Status</label>
          <select name="product_status" class="form-select">
            <option value="Y">Active</option>
            <option value="N">Inactive</option>
          </select>
        </div>
      </div> -->

      <!-- IMAGES -->
      <div class="mb-3">
        <label class="form-label">Upload Images</label>
        <input type="file" class="form-control" name="productImages" multiple accept="image/*">
        <small class="text-muted">You can select multiple images.</small>
      </div>

  

      <div class="d-flex justify-content-between mt-4">
        <a href="/products" class="btn btn-outline-secondary">‚Üê Back</a>
        <button type="submit" class="btn btn-primary px-4">Save Product</button>
      </div>
    </div>
  </form>
</div>
